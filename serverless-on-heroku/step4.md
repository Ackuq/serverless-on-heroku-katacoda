## Retrieve Log Session

When we have invoked the command on Heroku, the API will respond with a JSON object containing the name of the dyno 
in which our command is being executed (see previous step).

To stream the log generated by the dyno, we can create a log session that will connect to the [log stream of the 
specified dyno and stream the result](https://devcenter.heroku.com/articles/platform-api-reference#log-session-create). 
We include the parameters `"source": "app"` and `"tail": true` to specify that we only want the logs generated by the 
command itself and that the ongoing logs should be streamed.

For passing our `$DYNO_NAME` environment variable as a JSON string, we need to surround it with single quotes surrounded by double quotes.

If this command fails, go back to previous step and try starting the dyno again, and be sure to extract the name of the dyno to your environment variable `DYNO_NAME`

_Request_

```shell
curl -n -X POST https://api.heroku.com/apps/$APP_NAME/log-sessions \
-H "Content-Type: application/json" \
-H "Authorization: Bearer $TOKEN" \
-H "Accept: application/vnd.heroku+json; version=3" \
-d '{
  "dyno": "'"$DYNO_NAME"'",
  "source": "app",
  "tail": true
}'
```{{execute}}

_Response_

```js
{
  ...
  "logplex_url": "<LOGPLEX_URL>",
  ...
}
```

The response from creating the log session will include a URL to the log session, specified under the key `logplex_url`. 
This URL can be opened in your browser or fetch it with `curl`. It does not require additional authentication.

It is important that you have quotation marks around the URL when using `curl`, otherwise this will fail.

_Request_

`curl "<LOGPLEX_URL>" # Replace <LOGPLEX_URL> with value under key "logplex_url" in previous JSON response`{{copy}}

_Response_
```shell
app[<DYNO_NAME>]: Hello Daniela!
```

If the response is empty, it may mean that the logs have expired, in that case, trigger the one-off dyno again, as in the previous step, and try this step again.
